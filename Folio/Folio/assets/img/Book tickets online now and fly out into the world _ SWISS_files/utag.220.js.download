//tealium universal tag - utag.220 ut4.0.202301180941, Copyright 2023 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;u.ev={"view":1,"link":1};u.map={"anc_asr_paid_purchases_counter":"purchase.paid_purchases_counter","anc_asr_purchases_counter":"purchase.purchases_counter","anc_baggage_purchases_counter":"purchase.baggage_purchases_counter","anc_insurance_purchases_counter":"purchase.insurance_purchases_counter","anc_upgrade_purchases_counter":"purchase.upgrade_purchases_counter","booking_counter":"purchase.booking_counter","cart.price.total":"event.cart_price_total","clean.url":"config.page_location","consent_timestamp":"event.cmp_consent_time_stamp","consent_value":"event.cmp_consent_value","conversion.funnel.funnelName":"event.conversion_funnel_funnelName","conversion.funnel.funnelStep":"event.conversion_funnel_funnelStep","daysUntilDep":"event.daysUntilDep","debug_string":"event.debug_string","error.errorInfo.elementName":"error_evt.error_element_name","error.errorInfo.errorCode":"error_evt.error_code","error.errorInfo.message":"error_evt.error_message","error.errorInfo.type":"error_evt.error_type","error_counter":"error_evt.error_count","estimated_trip_reason":"event.estimated_trip_reason","filter.element.elementName":"event.filter_element_elementName","filter.element.elementType":"event.filter_element_elementType","filter.element.elementValue":"event.filter_element_elementValue","filter.element.userInput":"event.filter_element_userInput","ga_hs_adult":"event.hs_adult","ga_hs_all_origins":"event.hs_all_origins","ga_hs_anchor":"event.hs_anchor","ga_hs_arrival":"event.hs_arrival","ga_hs_booking_class":"event.hs_booking_class","ga_hs_bundle":"event.hs_bundle","ga_hs_child":"event.hs_child","ga_hs_departure":"event.hs_departure","ga_hs_destination":"event.hs_destination","ga_hs_farebase":"event.hs_farebase","ga_hs_infant":"event.hs_infant","ga_hs_origin":"event.hs_origin","ga_hs_pax":"event.hs_pax","ga_hs_paymentCity":"event.hs_paymentCity","ga_hs_paymentCountry":"event.hs_paymentCountry","ga_hs_paymentMethod":"event.hs_paymentType","ga_hs_querystring":"event.hs_querystring","ga_hs_triptype":"event.hs_triptype","ga_loginStatus":"event.loginStatus","ga_ss_clientId":"set.user_properties.ss_clientID","intcamp":"event.intcamp","metadata.entity":"event.metadata_entity","metadata.platform":"event.metadata_platform","page.pageInfo.city":"event.page_pageInfo_city","page.pageInfo.country":"event.page_pageInfo_country","page.pageInfo.language":"event.page_pageInfo_language","page.pageInfo.pageId":"event.page_pageInfo_pageId","page.pageInfo.pageName":"event.page_pageInfo_pageName","partner.attributes.destination":"event.partner_attributes_destination","transaction.total.conversionFees":"purchase.transaction_total_conversionFees","transaction.total.currency_ORIG":"purchase.transaction_total_currency_ORIG","transaction.total.fees":"purchase.transaction_total_fees","transaction.total.netFare":"purchase.transaction_total_netFare","transaction.total.netFare_EUR":"purchase.transaction_total_netFare_EUR","transaction.total.opc":"purchase.transaction_total_opc","transaction.total.surcharge":"purchase.transaction_total_surcharge","transaction.total.transactionTotal_ORIG":"purchase.transaction_total_transactionTotal_ORIG","user.profile.loginType":"event.user_profile_loginType","user.profile.membership.status":"event.user_profile_membership_status","user.profile.segment.segmentId":"event.user_profile_segment_segmentId","js_page.mmPageID":"event.page_mmPageID","js_page.navigator.userAgent":"event.page_navigator_userAgent","page.attributes.htmlTitle":"config.page_title","ga_pathname_cleaned_pageID":"config.page_path","ga_displayfeatures":"config.allow_google_signals","ga_ss_sessionId":"event.ss_sessionId","_sm_220_71":"event.tealium_profile_name,scroll.tealium_profile_name","utm_content":"utm_content","utm_campaign":"utm_campaign","utm_term":"utm_term","utm_medium":"utm_medium","utm_source":"utm_source","ga4_event_name:ga4_teaser_stage_click":"teaser_stage_click","ga4_event_name:ga4_begin_checkout":"begin_checkout","ga4_event_name:ga4_purchase":"purchase","ga4_event_name:ga4_teaser_fare_dynamic_click":"teaser_fare_dynamic_click","ga4_event_name:ga4_consent_view":"consent_view","ga4_event_name:ga4_consent_submit_selection":"consent_submit_selection","ga4_event_name:ga4_consent_submit_all":"consent_submit_all","ga4_event_name:ga4_consent_change_all":"consent_change_all","ga4_event_name:ga4_consent_change_selection":"consent_change_selection","ga4_event_name:ga4_next_flight_click":"next_flight_click,next_flight_click","ga4_event_name:ga4_error":"error_evt","ga4_event_name:ga4_teaser_next_flight_click":"teaser_next_flight_click","ga4_event_name:ga4_next_flight_view_regular":"next_flight_view_regular","ga4_event_name:ga4_next_flight_click_regular":"next_flight_click_regular","ga4_event_name:ga4_next_flight_view_regular_monitor":"next_flight_view_regular_monitor","ga4_event_name:ga4_next_flight_view_irregular_monitor":"next_flight_view_irregular_monitor","ga4_event_name:ga4_next_flight_click_regular_monitor":"next_flight_click_regular_monitor","ga4_event_name:ga4_next_flight_click_irregular_monitor":"next_flight_click_irregular_monitor","ga4_event_name:ga4_add_shipping_info":"add_shipping_info","ga4_event_name:ga4_add_payment_info":"add_payment_info","ga4_event_name:ga4_account_login":"account_login","ga4_event_name:ga4_account_login_attempt":"account_login_attempt","ga4_event_name:ga4_account_creation":"account_creation","ga4_event_name:ga4_flightmanager_search_car":"flightmanager_search_car","ga4_event_name:ga4_flightmanager_search_hotel":"flightmanager_search_hotel","ga4_event_name:ga4_flightmanager_submit_search":"flightmanager_submit_search","ga4_event_name:ga4_teaser_booking_flow_view_co2":"teaser_booking_flow_view_co2","ga4_event_name:ga4_flightmanager_click_flighttab":"flightmanager_click_flighttab","ga4_event_name:ga4_flightmanager_click_hoteltab":"flightmanager_click_hoteltab","ga4_event_name:ga4_flightmanager_click_cartab":"flightmanager_click_cartab","ga4_event_name:ga4_flightmanager_click_holidaytab":"flightmanager_click_holidaytab","ga4_event_name:ga4_recent_searches_click_submit":"recent_searches_click_submit","ga4_event_name:ga4_recent_searches_click_delete":"recent_searches_click_delete","ga4_event_name:ga4_refund_voucher_change_ticket_selection":"refund_voucher_change_ticket_selection","ga4_event_name:ga4_refund_voucher_fetch_ticket_fail":"refund_voucher_fetch_ticket_fail","ga4_event_name:ga4_refund_voucher_fetch_ticket_successful":"refund_voucher_fetch_ticket_successful","ga4_event_name:ga4_refund_voucher_summary":"refund_voucher_summary","ga4_event_name:ga4_refund_voucher_request_pdf":"refund_voucher_request_pdf","ga4_event_name:ga4_refund_voucher_fetch_voucher_fail":"refund_voucher_fetch_voucher_fail","ga4_event_name:ga4_refund_voucher_fetch_voucher_successful":"refund_voucher_fetch_voucher_successful","ga4_event_name:ga4_flight_results_shown":"flight_results_shown","ga4_event_name:ga4_login_portlet_open":"login_portlet_open","ga4_event_name:ga4_login_portlet_close":"login_portlet_close","ga4_event_name:ga4_login_portlet_registerlhid":"login_portlet_registerlhid","ga4_event_name:ga4_flightmanager_search_holiday":"flightmanager_search_holiday","ga4_event_name:ga4_teaser_image_click":"teaser_image_click","ga4_event_name:ga4_digital_doc_check_show":"digital_doc_check_show","ga4_event_name:ga4_digital_doc_check_click":"digital_doc_check_click","ga4_event_name:ga4_digital_doc_check_error":"digital_doc_check_error","ga4_event_name:ga4_teaser_fare_od_click":"teaser_fare_od_click","ga4_event_name:ga4_teaser_fare_static_click":"teaser_fare_static_click","ga4_event_name:ga4_consent_submit_none":"consent_submit_none","ga4_event_name:ga4_consent_change_none":"consent_change_none","ga4_event_name:ga4_external_link_click":"external_link_click","ga4_event_name:ga4_account_activation":"account_activation","ga4_event_name:ga4_oneid_login_click":"oneid_login_click","ga4_event_name:ga4_monetate_campaign":"monetate_campaign","ga4_event_name:ga4_storyhub_download_click":"storyhub_download_click","ga4_event_name:ga4_storyhub_download_button_click":"storyhub_download_button_click","ga4_event_name:ga4_storyhub_download_top-icon_click":"storyhub_topIcon_click","cart.item.attributes.brand":"product_brand","cart.item.attributes.quantity":"product_quantity","cart.item.attributes.variant":"product_variant","cart.item.categoryAll":"product_category","cart.item.price.basePrice":"product_unit_price","cart.item.productInfo.productId":"product_id","cart.item.productInfo.productName":"product_name","transaction.item.attributes.quantity":"product_quantity","transaction.item.attributes.variant":"product_variant","transaction.item.categoryAll":"product_category","transaction.item.price.basePrice":"product_unit_price","transaction.item.productInfo.productId":"product_id","transaction.item.productInfo.productName":"product_name","transaction.total.currency":"order_currency","transaction.total.tax":"order_tax","transaction.total.transactionTotal":"order_total","transaction.total.voucher.voucherId":"order_coupon_code","transaction.transactionId":"order_id","ga_eventPromoId":"next_flight_view_regular.promotion_id,next_flight_click_regular.promotion_id,next_flight_view_regular_monitor.promotion_id,next_flight_click.promotion_id,next_flight_view_irregular_monitor.promotion_id,next_flight_click_irregular_monitor.promotion_id,next_flight_click_regular_monitor.promotion_id","ga_eventPromoName":"next_flight_view_regular.promotion_name,next_flight_click_regular.promotion_name,next_flight_view_regular_monitor.promotion_name,next_flight_click.promotion_name,next_flight_view_irregular_monitor.promotion_name,next_flight_click_irregular_monitor.promotion_name,next_flight_click_regular_monitor.promotion_name","ga_eventPromoCreative":"next_flight_view_regular.creative_name,next_flight_click_regular.creative_name,next_flight_view_regular_monitor.creative_name,next_flight_click.creative_name,next_flight_view_irregular_monitor.creative_name,next_flight_click_irregular_monitor.creative_name,next_flight_click_regular_monitor.creative_name","ga_eventPromoPosition":"next_flight_view_regular.creative_slot,next_flight_click_regular.creative_slot,next_flight_view_regular_monitor.creative_slot,next_flight_click.creative_slot,next_flight_view_irregular_monitor.creative_slot,next_flight_click_irregular_monitor.creative_slot,next_flight_click_regular_monitor.creative_slot","ga4_account_persistence":"account_login.persistence","ga4_account_permission":"account_creation.lhid_permission","ut.event:view":"page_view","user.profile.profileInfo.profileId":"customer_id","ga4_teaser_stage_id":"teaser_stage_click.teaser_id","ga4_teaser_image_id":"teaser_image_click.teaser_id","ga4_teaser_fare_dynamic_interaction":"teaser_fare_dynamic_click.teaser_interaction","ga4_teaser_fare_od_interaction":"teaser_fare_od_click.teaser_interaction","ga4_teaser_fare_static_interaction":"teaser_fare_static_click.teaser_interaction","ga4_digital_doc_check_interaction_show":"digital_doc_check_show.digital_doc_check_interaction","ga4_digital_doc_check_interaction_click":"digital_doc_check_click.digital_doc_check_interaction","ga4_digital_doc_check_interaction_error":"digital_doc_check_error.digital_doc_check_interaction","ga4_account_persistence_attempt":"account_login_attempt.persistence","ga4_external_url":"external_link_click.external_url","ga_hs_paxAgeGroup_B1":"event.hs_paxAgeGroup","ga4_user_scope_id":"set.user_properties.userid","transaction.item.attributes.brand":"product_brand","ga4origin_and_destination":"event.origin_and_destination","ga_hs_all_destinations":"event.hs_all_destinations","ga_hs_paymentType":"event.hs_paymentMethod","ga4_datasource":"event.data_source","user.profile.profileInfo.permissions":"event.user_profile_permissions","ga4_measurement_id":"measurement_id","_sm_220_123":"config.cookie_domain","ga4_monetate_campaign_name":"monetate_campaign.monetate_campaign_name","ga4_monetate_campaign_type":"monetate_campaign.monetate_campaign_type"};u.extend=[function(a,b){try{b['_sm_220_123']=utag.cfg.domain;}catch(e){utag.DB(e);}
try{b['_sm_220_71']="lx-main";}catch(e){utag.DB(e);}},function(a,b){try{if(1){try{b.google_analytics_tracking_id="UA-100121750-41";b.ga4_measurement_id='G-F287RDQGED';if(b.tealium_environment==='prod'){if(b['dom.domain']==='www.swissair.com'||b['dom.domain']==='www.swiss.com'||b['dom.domain']==='book.swiss.com'||b['dom.domain']==='swiss.miles-and-more.com'){b.ga4_measurement_id='G-C8TDZM8M2T';if(b.app_webview==='yes'){b.google_analytics_tracking_id="UA-100121750-25";}else{b.google_analytics_tracking_id="UA-100121750-42";if(b['dom.viewport_width']<768&&b['dom.domain']!=='book.swiss.com'&&typeof b['conversion.funnel.funnelName']==='undefined'&&b["page.category.category1"]!=="book"){b.google_analytics_tracking_id='UA-100121750-45';}}}}else{if(b.app_webview==='yes'){b.google_analytics_tracking_id="UA-100121750-24";}else{if(b['dom.viewport_width']<768){b.google_analytics_tracking_id='UA-100121750-40';}}}}catch(ex){}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){try{if(b.ga_eventCategory){b.event_category=b.ga_eventCategory;b.event_action=b.ga_eventAction;b.event_label=b.ga_eventLabel;b['ga_eventCategory']=null;b['ga_eventAction']=null;b['ga_eventLabel']=null;b['ga_nonInteraction']=null;if(utag_data){if(utag_data['ga_eventCategory']){utag_data['ga_eventCategory']=null;utag_data['ga_eventAction']=null;utag_data['ga_eventLabel']=null;utag_data['ga_nonInteraction']=null;utag_data['event_category']=b.event_category;utag_data['event_action']=b.event_action;utag_data['event_label']=b.event_label;}}}
if(b.event_category){delete b['transaction.transactionId'];delete b['booking_counter'];delete b['transaction.total.opc'];delete b['transaction.total.surcharge'];delete b['transaction.total.fees'];delete b['transaction.total.conversionFees'];delete b['transaction.total.netFare'];delete b['transaction.total.transactionTotal_ORIG'];delete b['transaction.total.netFare_EUR'];b['transaction.transactionId']=null;b['booking_counter']=null;b['transaction.total.opc']=null;b['transaction.total.surcharge']=null;b['transaction.total.fees']=null;b['transaction.total.conversionFees']=null;b['transaction.total.netFare']=null;b['transaction.total.transactionTotal_ORIG']=null;b['transaction.total.netFare_EUR']=null;}
else{delete b['error.errorInfo.elementName'];delete b['error.errorInfo.errorCode'];delete b['error.errorInfo.message'];delete b['error.errorInfo.platform'];delete b['error.errorInfo.sourceURL'];delete b['error.errorInfo.sourceURLpath'];delete b['error.errorInfo.type'];delete b['error_counter'];}}
catch(ex){b['debug_string']="evdims | "+ex;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(typeof lhgData==='undefined'){var na='(no lhgdata)';var importantKeys={'page.pageInfo.city':1,'page.pageInfo.pageName':1,'ga_loginStatus':1,'page.pageInfo.pageId':1,'error.errorInfo.elementName':1,'error.errorInfo.type':1,'error.errorInfo.errorCode':1,'error.errorInfo.message':1,'metadata.platform':1,'metadata.entity':1,'user.profile.loginType':1,'user.profile.membership.status':1,'user.profile.profileInfo.profileId':1};for(var key in importantKeys){if(importantKeys.hasOwnProperty(key)&&!b.hasOwnProperty(key)){b[key]=na;}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var pathname=b.pathname_cleaned;if(!pathname.endsWith('/')){pathname=pathname.concat('/');}
b.ga_pathname_cleaned_pageID=pathname;if(b['transaction.transactionId']&&b['transaction.transactionId']!==''){var do_ti=true;var val='ti='+b['transaction.transactionId']+';';if(document.cookie.indexOf(val)>=0){do_ti=false;delete b['transaction.transactionId'];delete b['transaction.transactionId'];delete b['booking_counter'];delete b['transaction.total.opc'];delete b['transaction.total.surcharge'];delete b['transaction.total.fees'];delete b['transaction.total.conversionFees'];delete b['transaction.total.netFare'];delete b['transaction.total.transactionTotal_ORIG'];b['transaction.transactionId']=null;b['booking_counter']=null;b['transaction.total.opc']=null;b['transaction.total.surcharge']=null;b['transaction.total.fees']=null;b['transaction.total.conversionFees']=null;b['transaction.total.netFare']=null;b['transaction.total.transactionTotal_ORIG']=null;}
var d=new Date();d.setTime(d.getTime()+(7*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=val+expires+';path=/;domain=.lufthansa.com';if(do_ti){if((b.mmPageID_firstPart==='BKCO'&&(!b.booking_type||b.booking_type==='sale'))||b.mmPageID_firstPart==='REPC'){b.booking_counter=1;}
}}
var no_exclude=true;var excluded_errors=['46142','7076','7073','8703','7075','8183','7071'];if(b['mmPageID_firstPart']==='BKGD'){excluded_errors.push('3006');excluded_errors.push('4000');}else if(b['mmPageID_firstPart']==='CKPT'){excluded_errors.push('8104');}else if(b['mmPageID_firstPart']==='RBCO'||b['mmPageID_firstPart']==='EBCO'){excluded_errors.push('4000');}
if(b['error.errorInfo.errorCode']&&b['error.errorInfo.errorCode']!=='(no lhgdata)'&&b['error.errorInfo.errorCode']!=='(not set)'){for(var i_error in b['error.errorInfo.errorCode']){if(excluded_errors.indexOf(b['error.errorInfo.errorCode'][i_error])>=0){no_exclude=false;}else{no_exclude=true;break;}}
if(no_exclude){b.error_counter=1;}else if(a==='link'){u.all('set','metric12','');}}else if(a==='link'){u.all('set','metric12','');}
if(b['conversion.funnel.funnelStep']){var funnelStep=b['conversion.funnel.funnelStep'].toLowerCase();var checkout=new RegExp(/^(itco|alpi|purf)$/i);if(checkout.test(funnelStep)){b.ga_enh_productAction='checkout';}
if(funnelStep==='itco'){b.ga_checkoutStep=1;}
else if(funnelStep==='alpi'){b.ga_checkoutStep=2;}
else if(funnelStep==='purf'){b.ga_checkoutStep=3;}}
b.ga_loginStatus=b.logged_in;b.consent_value="(not set)";b.consent_timestamp="(not set)";var consent_cookie=window.utag.gdpr.getCookieValues()||{};if(consent_cookie&&consent_cookie.consent=='true'){b.consent_value="s".concat(consent_cookie.c2).concat('|c').concat(consent_cookie.c3).concat('|p').concat(consent_cookie.c4);b.consent_timestamp=consent_cookie.ts;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){try{b["anc_baggage_purchases_counter"]=null;b["anc_insurance_purchases_counter"]=null;b["anc_upgrade_purchases_counter"]=null;b["anc_asr_paid_purchases_counter"]=null;b["anc_asr_purchases_counter"]=null;if(b['transaction.transactionId']&&b['transaction.transactionId']!==''){if(b["anc_baggage"]==='yes')b["anc_baggage_purchases_counter"]=Math.min(1,b["anc_amt_baggage"]);if(b["anc_insu"]==='yes')b["anc_insurance_purchases_counter"]=Math.min(1,b["anc_amt_insu"]);if(b["anc_upgrade"]==='yes')b["anc_upgrade_purchases_counter"]=Math.min(1,b["anc_amt_upgrade"]);if(b["anc_seat"]==='yes'){if(b["anc_amt_seat_cost"]>0)b["anc_asr_paid_purchases_counter"]=Math.min(1,b["anc_amt_seat_cost"]);if(b["anc_amt_seat_free"]>0)b["anc_asr_purchases_counter"]=Math.min(1,b["anc_amt_seat_free"]);}}}
catch(ex){}
}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b['conversion.funnel.funnelStep']){b.ga_pathname_cleaned_pageID=b.ga_pathname_cleaned_pageID.concat(b['conversion.funnel.funnelStep']+'/');}else if(window.mmPageID){var ga_pageID=window.mmPageID.split('_')[0];if(ga_pageID.length==4){b.ga_pathname_cleaned_pageID=b.ga_pathname_cleaned_pageID.concat(ga_pageID.toLowerCase()+'/');}}
else{var ga_pageID=b['page.pageInfo.pageId'].split('_')[0];b.ga_pathname_cleaned_pageID=b.ga_pathname_cleaned_pageID.concat(ga_pageID.toLowerCase()+'/');}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var pax_age_arr_b1=[];var step=false;var legs=-1;var flights=-1;var arrival='',booking_class='',bundle='',departure='',origin='',destination='',paymentMethod='',paymentCity='',paymentCountry='',paymentType='',adult='',child='',infant='',pax='',allOrigins='',allDestinations='',triptype='',farebase='';if(b['cart.item.categoryAll']){step='cart';}else if(b['transaction.item.categoryAll']){step='transaction';}
if(b['filter.element.elementName']&&b['filter.element.userInput']){origin=b['filter.element.userInput'][b['filter.element.elementName'].indexOf('origin')];destination=b['filter.element.userInput'][b['filter.element.elementName'].indexOf('destination')];adult=b['filter.element.userInput'][b['filter.element.elementName'].indexOf('adults')];child=b['filter.element.userInput'][b['filter.element.elementName'].indexOf('children')];infant=b['filter.element.userInput'][b['filter.element.elementName'].indexOf('infants')];departure=b['filter.element.userInput'][b['filter.element.elementName'].indexOf('outbound-date')];arrival=b['filter.element.userInput'][b['filter.element.elementName'].indexOf('inbound-date')];pax=parseInt(adult)+parseInt(child)+parseInt(infant);}
if(step!==false){if(b[step+'.item.categoryAll']){if(b[step+'.item.categoryAll'][0].indexOf('multistop')>=0){triptype='multistop';}else if(b[step+'.item.categoryAll'][0].indexOf('oneway')>=0){triptype='oneway';}else if(b[step+'.item.categoryAll'][0].indexOf('roundtrip')>=0){triptype='roundtrip';}else if(b[step+'.item.categoryAll'][0].indexOf('openjaw')>=0){triptype='openjaw';}else{triptype='other';}}
if(b[step+'.item.productInfo.segment.number']){var highest=0;var index;var len=b[step+'.item.productInfo.segment.number'].length;for(var i=0;i<len;i++){index=parseInt(b[step+'.item.productInfo.segment.number'][i]);if(index>highest)highest=index;}
legs=highest;}
if(b[step+'.item.productInfo.segment.flightAssociation']){var highest=0;var index;var len=b[step+'.item.productInfo.segment.flightAssociation'].length;for(var i=0;i<len;i++){index=parseInt(b[step+'.item.productInfo.segment.flightAssociation'][i]);if(index>highest)highest=index;}
flights=highest;}
if(triptype!=='other'){if(b[step+'.item.productInfo.departure']){departure=b[step+'.item.productInfo.departure'][0].split(' ')[0];}
if(b[step+'.item.productInfo.origin']){origin=b[step+'.item.productInfo.origin'][0];}
if(triptype!=='oneway'&&b[step+'.item.productInfo.departure']&&flights>1){let lastFlight=flights-1;arrival=b[step+'.item.productInfo.departure'][lastFlight].split(' ')[0];}
if(triptype!=='openjaw'&&triptype!=='multistop'){if(typeof b[step+'.item.productInfo.segment.class']!=='undefined'){for(var i=0;i<legs;i++){booking_class+=b[step+'.item.productInfo.segment.class'][i]+'|';}
booking_class=booking_class.slice(0,-1);}
if(typeof b[step+'.item.productInfo.bundle']!=='undefined'&&legs){for(var i=0;i<flights;i++){bundle+=b[step+'.item.productInfo.bundle'][i]+'|';}
bundle=bundle.slice(0,-1);}
if(b[step+'.item.productInfo.destination']){destination=b[step+'.item.productInfo.destination'][0];}}}
pax=0;if(b[step+'.item.attributes.paxAdult']){adult=b[step+'.item.attributes.paxAdult'][0];pax+=parseInt(adult);}
if(b[step+'.item.attributes.paxChild']){child=b[step+'.item.attributes.paxChild'][0];pax+=parseInt(child);}
if(b[step+'.item.attributes.paxInfant']){infant=b[step+'.item.attributes.paxInfant'][0];pax+=parseInt(infant);}
if(b[step+'.item.productInfo.origin']){b[step+'.item.productInfo.origin'].forEach(function(v,i){if(b[step+'.item.category.category1'][i]==='flight'){allOrigins+=v+'|';}});allOrigins=allOrigins.slice(0,-1);}
if(b[step+'.item.productInfo.destination']){b[step+'.item.productInfo.destination'].forEach(function(v,i){if(b[step+'.item.category.category1'][i]==='flight'){allDestinations+=v+'|';}});allDestinations=allDestinations.slice(0,-1);}
if(b[step+'.item.productInfo.farebase']){b[step+'.item.productInfo.farebase'].forEach(function(v,i){if(b[step+'.item.category.category1'][i]==='flight'){farebase+=v+'|';}});farebase=farebase.slice(0,-1);}
if(b['conversion.funnel.funnelStep']==='bkco'&&b.booking_counter===1&&Array.isArray(lhgData.transaction.attributes.payment)&&lhgData.transaction.attributes.payment.length===0){paymentMethod=b['transaction.attributes.payment.paymentMethod']='(not set)';}else if(b['transaction.attributes.payment.paymentMethod']){b['transaction.attributes.payment.paymentMethod'].forEach(function(v){if(!v)v='(not set)';else if(v==='vi')v='visa';else if(v==='ca')v='mastercard';else if(v==='ax')v='american express';else if(v==='be')v='diners club';else if(v==='lhampso')v='sofort';else if(v==='lhampal')v='alipay';else if(v==='lhampdp')v='dotpay';else if(v==='lhampwc')v='wechat';else if(v==='lhampup')v='china union pay';else if(v==='lhampid')v='ideal';else if(v==='lhampbc')v='bancontact';else if(v==='lhampqw')v='qiwi qiwi';else if(v==='lhampqp')v='giropay';else if(v==='amop'&&b['page.pageInfo.country']){if(b['page.pageInfo.country']==='de')v='giropay';else if(b['page.pageInfo.country']==='at')v='eps';else if(b['page.pageInfo.country']==='nl')v='ideal';}
paymentMethod+=v+'|';});paymentMethod=paymentMethod.slice(0,-1);}
if(b['transaction.attributes.payment.paymentCity']){b['transaction.attributes.payment.paymentCity'].forEach(function(v){if(!v){v='(not set)';}
paymentCity+=v+'|';});paymentCity=paymentCity.slice(0,-1);}
if(b['transaction.attributes.payment.paymentCountry']){b['transaction.attributes.payment.paymentCountry'].forEach(function(v){if(!v){v='(not set)';}
paymentCountry+=v+'|';});paymentCountry=paymentCountry.slice(0,-1);}
if(b['transaction.attributes.payment.paymentType']){b['transaction.attributes.payment.paymentType'].forEach(function(v){if(!v){v='(not set)';}
paymentType+=v+'|';});paymentType=paymentType.slice(0,-1);}}
if(b['conversion.funnel.funnelStep']&&b['conversion.funnel.funnelStep']==="advs"){if(document.querySelector('#ADVANCED_SEARCH_FLIGHTS_DEPARTURE_LOCATION_1_0-airport-value')){origin=document.querySelector('#ADVANCED_SEARCH_FLIGHTS_DEPARTURE_LOCATION_1_0-airport-value').value||'';origin=origin.toLowerCase();}
if(document.querySelector('#ADVANCED_SEARCH_FLIGHTS_ARRIVAL_LOCATION_1_0-airport-value')){destination=document.querySelector('#ADVANCED_SEARCH_FLIGHTS_ARRIVAL_LOCATION_1_0-airport-value').value||'';destination=destination.toLowerCase();}}
if(typeof b['clean.query_string']==='string'&&b['clean.query_string']!==''){b['ga_hs_querystring']='?'+b['clean.query_string'];}
if(typeof b['dom.hash']==='string'&&b['dom.hash']!==''){b['ga_hs_anchor']='#'+b['dom.hash'];}
b['ga_ss_userId']=b['user.profile.profileInfo.profileId']||'';var readCookie=function(cookieName){var re=new RegExp('[; ]'+cookieName+'=([^\\s;]*)');var sMatch=(' '+document.cookie).match(re);if(cookieName&&sMatch)return unescape(sMatch[1]);return'';};b['ga_ss_clientId']=readCookie('_ga').split('.').slice(-2).join('.');b['ga_ss_sessionId']=b['tealium_random']||undefined;if(triptype){b['ga_hs_triptype']=triptype;}else if(b.trip_type){if(b.trip_type==='rt')triptype='roundtrip';else if(b.trip_type==='ow')triptype='oneway';else if(b.trip_type==='ms')triptype='multistop';else triptype='other';b['ga_hs_triptype']=triptype;}
if(arrival){b['ga_hs_arrival']=arrival;}
if(booking_class){b['ga_hs_booking_class']=booking_class;}
if(bundle){b['ga_hs_bundle']=bundle;}
if(departure){b['ga_hs_departure']=departure;}
if(destination){b['ga_hs_destination']=destination;}
if(origin){b['ga_hs_origin']=origin;}
if(adult){b['ga_hs_adult']=adult;}
if(child){b['ga_hs_child']=child;}
if(infant){b['ga_hs_infant']=infant;}
if(adult!=0){pax_age_arr_b1.push('adt:'+adult);}
if(child!=0){pax_age_arr_b1.push('chd:'+child);}
if(infant!=0){pax_age_arr_b1.push('inf:'+infant);}
if(pax_age_arr_b1.length>0){b['ga_hs_paxAgeGroup_B1']=pax_age_arr_b1.join('|');}
if(pax){b['ga_hs_pax']=pax;}
if(allOrigins){b['ga_hs_all_origins']=allOrigins;}
if(allDestinations){b['ga_hs_all_destinations']=allDestinations;}
if(farebase){b['ga_hs_farebase']=farebase;}
if(paymentMethod){b['ga_hs_paymentMethod']=paymentMethod;}
if(paymentCity){b['ga_hs_paymentCity']=paymentCity;}
if(paymentCountry){b['ga_hs_paymentCountry']=paymentCountry;}
if(paymentType){b['ga_hs_paymentType']=paymentType;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var na='(not set)';b['error.errorInfo.elementName']=b['error.errorInfo.elementName']||na;b['error.errorInfo.type']=b['error.errorInfo.type']||na;b['error.errorInfo.errorCode']=b['error.errorInfo.errorCode']||na;b['error.errorInfo.message']=b['error.errorInfo.message']||na;var blockedKeys={'booking_counter':1,'error_counter':1,'cart.price.total':1,'cart.item.attributes.brand':1,'cart.item.attributes.quantity':1,'cart.item.attributes.variant':1,'cart.item.categoryAll':1,'cart.item.price.basePrice':1,'cart.item.productInfo.productId':1,'cart.item.productInfo.productName':1,'ga_checkoutStep':1,'ga_enh_productAction':1,'ga_eventAction':1,'ga_eventCategory':1,'ga_eventLabel':1,'ga_nonInteraction':1,'event_action':1,'event_category':1,'event_label':1,'event_noninteraction':1,'ga_pathname_cleaned_pageID':1,'ga_referrer':1,'ga_webview_session':1,'google_analytics_tracking_id':1,'page.attributes.htmlTitle':1,'page.category.category1':1,'page.category.category2':1,'page.category.category3':1,'page.category.category4':1,'page.category.category5':1,'transaction.item.attributes.brand':1,'transaction.item.attributes.quantity':1,'transaction.item.attributes.variant':1,'transaction.item.categoryAll':1,'transaction.item.price.basePrice':1,'transaction.item.productInfo.productId':1,'transaction.item.productInfo.productName':1,'transaction.total.currency':1,'transaction.total.tax':1,'transaction.total.opc':1,'transaction.total.surcharge':1,'transaction.total.fees':1,'transaction.total.conversionFees':1,'transaction.total.netFare':1,'transaction.total.transactionTotal':1,'transaction.transactionId':1,'user.profile.profileInfo.profileId':1,'ga_ss_userId':1,'ga_ss_clientId':1,'utm_campaign':1,'utm_content':1,'utm_medium':1,'utm_source':1,'utm_term':1};for(var key in b){if(b.hasOwnProperty(key)&&!blockedKeys.hasOwnProperty(key)){if(typeof b[key]==='string'&&(b[key]===''||b[key]===' '))b[key]=na;}}}}catch(e){utag.DB(e)}},function(a,b){utag.ut.md5=function(t,n){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r&&"function"==typeof require)try{r=require("crypto")}catch(t){}var e=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(n){var r;return t.prototype=n,r=new t,t.prototype=null,r}}(),o={},s=o.lib={},a=s.Base={extend:function(t){var n=i(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var n=this.words,r=t.words,e=this.sigBytes,i=t.sigBytes;if(this.clamp(),e%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;n[e+o>>>2]|=s<<24-(e+o)%4*8}else for(o=0;o<i;o+=4)n[e+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,r=this.sigBytes;n[r>>>2]&=4294967295<<32-r%4*8,n.length=t.ceil(r/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(e());return new c.init(n,t)}}),u=o.enc={},f=u.Hex={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push((o>>>4).toString(16)),e.push((15&o).toString(16))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e+=2)r[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(r,n/2)}},h=u.Latin1={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push(String.fromCharCode(o))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e++)r[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(r,n)}},d=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var r,e=this._data,i=e.words,o=e.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,f=t.min(4*u,o);if(u){for(var h=0;h<u;h+=s)this._doProcessBlock(i,h);r=i.splice(0,u),e.sigBytes-=f}return new c.init(r,f)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(s.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,r){return new t.init(r).finalize(n)}},_createHmacHelper:function(t){return function(n,r){return new p.HMAC.init(t,r).finalize(n)}}}),o.algo={});return o}(Math);(function(t){var n=utag.ut.md5,r=n.lib,e=r.WordArray,i=r.Hasher,o=n.algo,s=[];!function(){for(var n=0;n<64;n++)s[n]=4294967296*t.abs(t.sin(n+1))|0}();var a=o.MD5=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var r=0;r<16;r++){var e=n+r,i=t[e];t[e]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[n+0],d=t[n+1],l=t[n+2],p=t[n+3],y=t[n+4],g=t[n+5],w=t[n+6],v=t[n+7],_=t[n+8],m=t[n+9],B=t[n+10],x=t[n+11],b=t[n+12],S=t[n+13],H=t[n+14],z=t[n+15],C=o[0],M=o[1],A=o[2],D=o[3];C=c(C,M,A,D,a,7,s[0]),D=c(D,C,M,A,d,12,s[1]),A=c(A,D,C,M,l,17,s[2]),M=c(M,A,D,C,p,22,s[3]),C=c(C,M,A,D,y,7,s[4]),D=c(D,C,M,A,g,12,s[5]),A=c(A,D,C,M,w,17,s[6]),M=c(M,A,D,C,v,22,s[7]),C=c(C,M,A,D,_,7,s[8]),D=c(D,C,M,A,m,12,s[9]),A=c(A,D,C,M,B,17,s[10]),M=c(M,A,D,C,x,22,s[11]),C=c(C,M,A,D,b,7,s[12]),D=c(D,C,M,A,S,12,s[13]),A=c(A,D,C,M,H,17,s[14]),C=u(C,M=c(M,A,D,C,z,22,s[15]),A,D,d,5,s[16]),D=u(D,C,M,A,w,9,s[17]),A=u(A,D,C,M,x,14,s[18]),M=u(M,A,D,C,a,20,s[19]),C=u(C,M,A,D,g,5,s[20]),D=u(D,C,M,A,B,9,s[21]),A=u(A,D,C,M,z,14,s[22]),M=u(M,A,D,C,y,20,s[23]),C=u(C,M,A,D,m,5,s[24]),D=u(D,C,M,A,H,9,s[25]),A=u(A,D,C,M,p,14,s[26]),M=u(M,A,D,C,_,20,s[27]),C=u(C,M,A,D,S,5,s[28]),D=u(D,C,M,A,l,9,s[29]),A=u(A,D,C,M,v,14,s[30]),C=f(C,M=u(M,A,D,C,b,20,s[31]),A,D,g,4,s[32]),D=f(D,C,M,A,_,11,s[33]),A=f(A,D,C,M,x,16,s[34]),M=f(M,A,D,C,H,23,s[35]),C=f(C,M,A,D,d,4,s[36]),D=f(D,C,M,A,y,11,s[37]),A=f(A,D,C,M,v,16,s[38]),M=f(M,A,D,C,B,23,s[39]),C=f(C,M,A,D,S,4,s[40]),D=f(D,C,M,A,a,11,s[41]),A=f(A,D,C,M,p,16,s[42]),M=f(M,A,D,C,w,23,s[43]),C=f(C,M,A,D,m,4,s[44]),D=f(D,C,M,A,b,11,s[45]),A=f(A,D,C,M,z,16,s[46]),C=h(C,M=f(M,A,D,C,l,23,s[47]),A,D,a,6,s[48]),D=h(D,C,M,A,v,10,s[49]),A=h(A,D,C,M,H,15,s[50]),M=h(M,A,D,C,g,21,s[51]),C=h(C,M,A,D,b,6,s[52]),D=h(D,C,M,A,p,10,s[53]),A=h(A,D,C,M,B,15,s[54]),M=h(M,A,D,C,d,21,s[55]),C=h(C,M,A,D,_,6,s[56]),D=h(D,C,M,A,z,10,s[57]),A=h(A,D,C,M,w,15,s[58]),M=h(M,A,D,C,S,21,s[59]),C=h(C,M,A,D,y,6,s[60]),D=h(D,C,M,A,x,10,s[61]),A=h(A,D,C,M,l,15,s[62]),M=h(M,A,D,C,m,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+M|0,o[2]=o[2]+A|0,o[3]=o[3]+D|0},_doFinalize:function(){var n=this._data,r=n.words,e=8*this._nDataBytes,i=8*n.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(e/4294967296),s=e;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var f=c[u];c[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,n,r,e,i,o,s){var a=t+(n&r|~n&e)+i+s;return(a<<o|a>>>32-o)+n}function u(t,n,r,e,i,o,s){var a=t+(n&e|r&~e)+i+s;return(a<<o|a>>>32-o)+n}function f(t,n,r,e,i,o,s){var a=t+(n^r^e)+i+s;return(a<<o|a>>>32-o)+n}function h(t,n,r,e,i,o,s){var a=t+(r^(n|~e))+i+s;return(a<<o|a>>>32-o)+n}n.MD5=i._createHelper(a),n.HmacMD5=i._createHmacHelper(a)}(Math));try{if(typeof b['user.profile.profileInfo.profileId']!='undefined'&&b['user.profile.profileInfo.profileId']!=''){b['user.profile.profileInfo.profileId']=utag.ut.md5.MD5(b['user.profile.profileInfo.profileId']).toString();}}catch(e){}},function(a,b){try{if((typeof b['cp.CONSENTMGR']!='undefined'&&b['cp.CONSENTMGR'].toString().toLowerCase().indexOf('c4:1'.toLowerCase())>-1)){b['ga_displayfeatures']='true'}}catch(e){utag.DB(e);}},function(a,b){try{if(1){if(b.event_category==='stage teaser'&&b.event_action==='click'){b.ga4_event_name='ga4_teaser_stage_click';b.ga4_teaser_stage_id=b.event_label;}else if(b.event_category==='image teaser'&&b.event_action==='click'){b.ga4_event_name='ga4_teaser_image_click';b.ga4_teaser_image_id=b.event_label;}else if(b.event_category==='stage teaser'&&b.event_action==='view'){b.ga4_event_name='ga4_teaser_stage_view';b.ga4_teaser_stage_id=b.event_label;}else if(b.ga_checkoutStep===1&&b["ut.event"]==="view"){b.ga4_event_name='ga4_begin_checkout';}else if(b.ga_checkoutStep===2&&b["ut.event"]==="view"){b.ga4_event_name='ga4_add_shipping_info';}else if(b.ga_checkoutStep===3&&b["ut.event"]==="view"){b.ga4_event_name='ga4_add_payment_info';}else if(b.ga_enh_productAction==='purchase'){b.ga4_event_name='ga4_purchase';}else if(b.event_category==='next flight teaser'){b.ga4_event_name='ga4_teaser_next_flight_click';}else if(b.event_category==='fare teaser dynamic'&&b.event_action==='click'){b.ga4_event_name='ga4_teaser_fare_dynamic_click';b.ga4_teaser_fare_dynamic_interaction=b.event_label;}else if(b.event_category==='fare teaser od'&&b.event_action==='click'){b.ga4_event_name='ga4_teaser_fare_od_click';b.ga4_teaser_fare_od_interaction=b.event_label;}else if(b.event_category==='fare teaser static'&&b.event_action==='click'){b.ga4_event_name='ga4_teaser_fare_static_click';b.ga4_teaser_fare_static_interaction=b.event_label;}else if(b.event_category==='consent manager'){b.ga4_event_name='ga4_consent_'+b.event_action.replace(/ /g,'_');b.ga4_consent_status=b.event_label;}else if(b.event_category==='next flight component'){b.ga4_event_name='ga4_next_flight_'+b.event_action.replace(/( next)? flight/,'').replace(/ /g,'_');b.ga4_next_flight_component_interaction=b.event_label;}else if(b.event_category==='error'){b.ga4_event_name='ga4_error';}else if(b.event_category==='user account'&&b.event_action==='log in'){b.ga4_event_name='ga4_account_login';b.ga4_account_persistence=b.event_label;}
else if(b.event_category==='user account'&&b.event_action==='log in attempt'){b.ga4_event_name='ga4_account_login_attempt';b.ga4_account_persistence_attempt=b.event_label;}
else if(b.event_category==='account enrolment'&&b.event_action==='create profile'){b.ga4_event_name='ga4_account_creation';b.ga4_account_permission=b.event_label;}
else if(b.event_category==='flightmanager'&&b.event_action==='search'&&b.event_label==='car'){b.ga4_event_name='ga4_flightmanager_search_car';}
else if(b.event_category==='flightmanager'&&b.event_action==='search'&&b.event_label==='holiday'){b.ga4_event_name='ga4_flightmanager_search_holiday';}
else if(b.event_category==='flightmanager'&&b.event_action==='search'&&b.event_label==='hotel'){b.ga4_event_name='ga4_flightmanager_search_hotel';}
else if(b.event_category==='flightmanager'&&b.event_action==='submit'&&b.event_label==='search flights'){b.ga4_event_name='ga4_flightmanager_submit_search';}
else if(b.event_category==='booking flow teaser'&&b.event_action==='view'){b.ga4_event_name='ga4_teaser_booking_flow_view_co2';}
else if(b.event_category==='flightmanager'&&b.event_action==='click'){b.ga4_event_name='ga4_flightmanager_click_'+b.event_label.replace("open | ","");}
else if(b.event_category==='recent searches'&&b.event_action==='click'){b.ga4_event_name='ga4_recent_searches_click_'+b.event_label;}
else if(b.event_category==='refund voucher'){b.ga4_event_name='ga4_refund_voucher_'+b.event_label.replace(/ /g,'_');}
else if(b.event_category==='login portlet'&&b.event_action==='click'){b.ga4_event_name='ga4_login_portlet_'+b.event_label.toLowerCase();}
else if(b.event_category==='digital doc check'&&b.event_action==='click'){b.ga4_event_name='ga4_digital_doc_check_click';b.ga4_digital_doc_check_interaction_click=b.event_label.toLowerCase();}
else if(b.event_category==='digital doc check'&&b.event_action==='show'){b.ga4_event_name='ga4_digital_doc_check_show';b.ga4_digital_doc_check_interaction_show=b.event_label.toLowerCase();}
else if(b.event_category==='digital doc check'&&b.event_action==='error'){b.ga4_event_name='ga4_digital_doc_check_error';b.ga4_digital_doc_check_interaction_error=b.event_label.toLowerCase();}
else if(b.event_category==='external link'){b.ga4_event_name='ga4_external_link_click';b.ga4_external_url=b.event_label.toLowerCase();}
else if((!b.event_category)&&(!b.event_action)&&b.mmPageID_firstPart==='FFPP'&&b["ut.event"]==="view"){b.ga4_event_name='ga4_flight_results_shown';}
else if(b.event_category==='oneid login'){b.ga4_event_name='ga4_oneid_login_click';}
else if(b.event_category==='story hub'){let typeOfEvent=b.event_label;let extendedEventName='';if(typeOfEvent=='top-icon download'){extendedEventName='ga4_storyhub_download_top-icon_click';}else if(typeOfEvent=='download button'){extendedEventName='ga4_storyhub_download_button_click';}else{extendedEventName='ga4_storyhub_download_click';}
b.ga4_event_name=extendedEventName;}
b.consent_value="(not set)";b.consent_timestamp="(not set)";var consent_cookie=window.utag.gdpr.getCookieValues()||{};if(consent_cookie&&consent_cookie.consent=='true'){b.consent_value="s".concat(consent_cookie.c2).concat('|c').concat(consent_cookie.c3).concat('|p').concat(consent_cookie.c4);b.consent_timestamp=consent_cookie.ts;}
b.ga4_user_scope_id=b['user.profile.profileInfo.profileId'];b.ga_loginStatus=b.logged_in;if(!b["metadata.entity"])b["metadata.entity"]="lx";if(!b["metadata.platform"]){if(b["platformId"]=="adcb1"){if((b["dom.domain"]=="www.swiss.com")||(b["dom.domain"]=="swiss.com")){b["metadata.platform"]="AirEM";}}}
if(b['ga_hs_origin']){if(b["ga_hs_destination"]){b.ga4origin_and_destination=b['ga_hs_origin']+"-"+b["ga_hs_destination"];}}
if(b.tealium_environment==="qa"||b.tealium_environment==="dev"){console.log("Consent Stuff: "+b.consent_value+" | "+b.consent_timestamp);console.log(b);console.log('TEST | '+b.event_category+' | '+b.event_action+' | '+utag.cfg.v);console.log('TEST | '+b.ga4_event_name);}}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['cp.CONSENTMGR']=='undefined'||b['cp.CONSENTMGR'].toString().toLowerCase().indexOf('c2:0'.toLowerCase())>-1||b['cp.CONSENTMGR'].toString().toLowerCase()=='(not set)'.toLowerCase()){b.ga_ss_sessionId=undefined;b["user.profile.profileInfo.profileId"]=undefined;b.ga4_user_scope_id=undefined;b.ga_ss_clientId=undefined;b.ga_ss_clientId=undefined;b.ga_profileId=undefined;b["digitalTouchpoint.touchpointInfo.sessionID"]=undefined;}}catch(e){utag.DB(e)}}];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB("send:220");utag.DB(data_layer);var a,b,c,d,i,j,has_purchase=false,prop;a=utag_event;b=data_layer;u.data={"base_url":"https://www.googletagmanager.com/gtag/js?id=##utag_measurement_id##","measurement_id":"G-F287RDQGED","clear_global_vars":"true","data_layer_name":"","send_page_view":"false","order_id":"","order_total":"","order_subtotal":"","order_shipping":"","order_tax":"","order_store":"","order_currency":"","order_coupon_code":"","product_id":[],"product_name":[],"product_brand":[],"product_category":[],"product_subcategory":[],"product_addcategory3":[],"product_addcategory4":[],"product_addcategory5":[],"product_quantity":[],"product_unit_price":[],"product_discount":[],"product_coupon":[],"product_variant":[],"product_promotion_id":[],"product_promotion_name":[],"product_creative_name":[],"product_creative_slot":[],"product_location_id":[],"product_index":[],"product_item_list_name":[],"product_item_list_id":[],"product_affiliation":[],"event_queue":[],"config":{},"set":{"developer_id.dYmQxMT":true,"user_properties":{}},"event":{},"items":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};utag.DB("send:220:EXTENSIONS");utag.DB(data_layer);for(var mapping_key in utag.loader.GV(u.map)){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");for(i=0;i<destinations.length;i++){mapFunc(destinations[i].split("."),u.data,data_layer[mapping_key]);}}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&data_layer[event_destinations[0]]===event_destinations[1]){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(","));}}}}
utag.DB("send:220:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||data_layer._corder||"";u.data.order_total=u.data.order_total||data_layer._ctotal||"";u.data.order_shipping=u.data.order_shipping||data_layer._cship||"";u.data.order_tax=u.data.order_tax||data_layer._ctax||"";u.data.order_store=u.data.order_store||data_layer._cstore||"";u.data.order_currency=u.data.order_currency||data_layer._ccurrency||"";u.data.order_coupon_code=u.data.order_coupon_code||data_layer._cpromo||"";u.data.customer_id=u.data.customer_id||data_layer._ccustid||"";u.data.customer_city=u.data.customer_city||data_layer._ccity||"";u.data.customer_state=u.data.customer_state||data_layer._cstate||"";u.data.customer_zip=u.data.customer_zip||data_layer._czip||"";u.data.customer_country=u.data.customer_country||data_layer._ccountry||"";if(u.data.product_id.length===0&&data_layer._cprod!==undefined){u.data.product_id=data_layer._cprod.slice(0);}
if(u.data.product_name.length===0&&data_layer._cprodname!==undefined){u.data.product_name=data_layer._cprodname.slice(0);}
if(u.data.product_brand.length===0&&data_layer._cbrand!==undefined){u.data.product_brand=data_layer._cbrand.slice(0);}
if(u.data.product_category.length===0&&data_layer._ccat!==undefined){u.data.product_category=data_layer._ccat.slice(0);}
if(u.data.product_subcategory.length===0&&data_layer._ccat2!==undefined){u.data.product_subcategory=data_layer._ccat2.slice(0);}
if(u.data.product_quantity.length===0&&data_layer._cquan!==undefined){u.data.product_quantity=data_layer._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&data_layer._cprice!==undefined){u.data.product_unit_price=data_layer._cprice.slice(0);}
if(u.data.product_discount.length===0&&data_layer._cpdisc!==undefined){u.data.product_discount=data_layer._cpdisc.slice(0);}
if(utag.ut.typeOf(u.data.measurement_id)==="string"&&u.data.measurement_id!==""){u.data.measurement_id=u.data.measurement_id.replace(/\s/g,"").split(",");}
if(u.data.data_layer_name){u.data.base_url=u.data.base_url+"&l="+u.data.data_layer_name;}
if(!u.data.measurement_id){utag.DB(u.id+": Tag not fired: Required attribute measurement_id not populated");return;}
if(u.data.gtag_enable_tcf_support){window["gtag_enable_tcf_support"]=toBoolean(u.data.gtag_enable_tcf_support);}
var utmParams=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];var utmPageLocation=u.data.config.page_location||data_layer["dom.url"];var utmQuery=[];utmParams.forEach(function(paramName){if(u.data[paramName]&&utmPageLocation.indexOf(paramName+"=")===-1){utmQuery.push(paramName+"="+u.data[paramName]);}});if(utmQuery.length){u.data.config.page_location=utmPageLocation.indexOf("?")===-1?utmPageLocation+"?"+utmQuery.join("&"):utmPageLocation+"&"+utmQuery.join("&");}
u.data.event.send_to=u.data.event.send_to||u.data.measurement_id;if(u.data.customer_id){u.data.config.user_id=u.data.customer_id;}
if(toBoolean(u.data.clear_global_vars)){setGlobalProperties(u.data.config,true);for(prop in utag.loader.GV(u.data.set)){if(prop!=="developer_id.dYmQxMT"){setGlobalProperties(u.data.set,true,prop);}}}
setGlobalProperties(u.data.config,false);setGlobalProperties(u.data.set,false);if(u.data.config.send_page_view!==undefined){u.data.send_page_view=toBoolean(u.data.config.send_page_view);}
if(!u.initialized&&toBoolean(u.data.send_page_view)){u.data.event_queue.unshift("page_view");}
u.data.config.send_page_view=false;for(i=0;i<u.data.measurement_id.length;i++){if(!/^[a-zA-Z]{1}-|^[a-zA-Z]{2}-/.test(u.data.measurement_id[i])){u.data.measurement_id[i]="G-"+u.data.measurement_id[i];}
u.o("config",u.data.measurement_id[i],u.data.config);}
u.initialized=true;for(i=0;i<u.data.event_queue.length;i++){if(u.data.event_queue[i]==="purchase"||u.data.event_queue[i]==="refund"){has_purchase=true;}}
if(u.data.order_id&&!has_purchase){u.data.event_queue.push("purchase");}
for(i=0;i<u.data.event_queue.length;i++){var event_name=u.data.event_queue[i];var event_data={};event_data=JSON.parse(JSON.stringify(u.data.event));if(u.data.event.event_callback){event_data.event_callback=u.data.event.event_callback;}
if(u.data.event.non_interaction){u.data.event.non_interaction=true;}
if(u.event_map[event_name]){for(j=0;j<u.event_map[event_name].length;j++){var event_param=u.event_map[event_name][j];var event_param_value=u.std_params[event_param]?u.std_params[event_param](event_name):u.data[event_param]||"";if(event_param_value!==""){event_data[event_param]=event_param_value;}}}
Object.keys(u.map).forEach(function(mapping_from){if(u.map[mapping_from].indexOf(event_name)===0&&typeof b[mapping_from]!=="undefined"){var mapping_to=u.map[mapping_from].substring(event_name.length+1);event_data[mapping_to]=b[mapping_from];}});utag.ut.merge(event_data,u.data[event_name],0);u.o("event",event_name,event_data);}
if(!hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.data.base_url=u.data.base_url.replace("##utag_measurement_id##",u.data.measurement_id[0]);utag.ut.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_220","attrs":{}});}
utag.DB("send:220:COMPLETE");}};function mapFunc(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){mapFunc(arr,obj[i],item);}else{obj[i]=item;}}
function toBoolean(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";}
function hasgtagjs(){window.gtagRename=window.gtagRename||""||"gtag";if(utag.ut.gtagScriptRequested){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0&&(s[i].id&&s[i].id.indexOf("utag")>-1)){return true;}}
var data_layer_name=""||"dataLayer";window[data_layer_name]=window[data_layer_name]||[];if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){window[data_layer_name].push(arguments);};var cross_track=toBoolean(""),cross_track_domains="";if(cross_track&&cross_track_domains!==""){window[window.gtagRename]("set","linker",{domains:cross_track_domains.split(","),accept_incoming:true});}
window[window.gtagRename]("js",new Date());}
return false;}
u.scriptrequested=hasgtagjs();u.initialized=false;u.o=window[window.gtagRename];function setGlobalProperties(data,reset,custom_property){var map={"user_id":{"name":"user_id","type":"exists","reset":true},"page_path":{"name":"page_path","type":"exists","reset":true},"page_title":{"name":"page_title","type":"exists","reset":true},"page_location":{"name":"page_location","type":"exists","reset":false},"developer_id.dYmQxMT":{"name":"developer_id.dYmQxMT","type":"exists","reset":false},"user_properties":{"name":"user_properties","type":"object","reset":true}},prop,subProp,g={};if(custom_property&&reset){g[custom_property]="";}
for(prop in utag.loader.GV(map)){if(reset&&map[prop].reset){if(map[prop].name==="user_properties"){for(subProp in data[prop]){if(!g[map[prop].name]){g[map[prop].name]={};}
g[map[prop].name][subProp]="";}}else{g[map[prop].name]="";}}else{if(map[prop].type==="bool"){if(data[prop]==true||data[prop]==="true"){g[map[prop].name]=true;}}
else if(map[prop].type==="exists"||map[prop].type==="object"){if(data[prop]){g[map[prop].name]=data[prop];}}}}
if(!utag.ut.isEmptyObject(g)){u.o("set",g);}}
function getItems(length){var g={},i,items=[];length=length||u.data.product_id.length||u.data.product_name.length;for(i=0;i<length;i++){g={};g.item_id=u.data.product_id[i];if(u.data.product_name[i]){g.item_name=u.data.product_name[i];}
if(u.data.product_coupon[i]){g.coupon=u.data.product_coupon[i];}
if(u.data.product_discount[i]){g.discount=u.data.product_discount[i];}
if(u.data.product_affiliation[i]){g.affiliation=u.data.product_affiliation[i];}
if(u.data.product_brand[i]){g.item_brand=u.data.product_brand[i];}
if(u.data.product_category[i]){g.item_category=u.data.product_category[i];}
if(u.data.product_subcategory[i]){g.item_category2=u.data.product_subcategory[i];}
if(u.data.product_addcategory3[i]){g.item_category3=u.data.product_addcategory3[i];}
if(u.data.product_addcategory4[i]){g.item_category4=u.data.product_addcategory4[i];}
if(u.data.product_addcategory5[i]){g.item_category5=u.data.product_addcategory5[i];}
if(u.data.product_variant[i]){g.item_variant=u.data.product_variant[i];}
if(u.data.product_unit_price[i]){g.price=u.data.product_unit_price[i];}
if(u.data.order_currency){g.currency=u.data.order_currency;}
if(u.data.product_quantity[i]){g.quantity=u.data.product_quantity[i];}
if(u.data.product_promotion_id[i]){g.promotion_id=u.data.product_promotion_id[i];}
if(u.data.product_promotion_name[i]){g.promotion_name=u.data.product_promotion_name[i];}
if(u.data.product_creative_name[i]){g.creative_name=u.data.product_creative_name[i];}
if(u.data.product_creative_slot[i]){g.creative_slot=u.data.product_creative_slot[i];}
if(u.data.product_location_id[i]){g.location_id=u.data.product_location_id[i];}
if(u.data.product_index[i]){g.index=u.data.product_index[i];}
if(u.data.product_item_list_name[i]){g.item_list_name=u.data.product_item_list_name[i];}
if(u.data.product_item_list_id[i]){g.item_list_id=u.data.product_item_list_id[i];}
items.push(g);}
return items;}
u.event_map={add_payment_info:["coupon","currency","items","payment_type","value"],add_shipping_info:["coupon","currency","items","shipping_tier","value"],add_to_cart:["currency","items","value"],add_to_wishlist:["currency","items","value"],begin_checkout:["coupon","currency","items","value"],earn_virtual_currency:["virtual_currency_name","value"],generate_lead:["currency","value"],join_group:["group_id"],level_end:["level_name","success"],level_start:["level_name"],level_up:["level","character"],login:["method"],post_score:["score","level","character"],purchase:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],refund:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],remove_from_cart:["currency","items","value"],search:["search_term"],select_content:["content_type","item_id"],select_item:["items","item_list_name","item_list_id"],select_promotion:["items","location_id"],share:["method","content_type","content_id"],sign_up:["method"],spend_virtual_currency:["item_name","virtual_currency_name","value"],tutorial_begin:[],tutorial_complete:[],unlock_achievement:["achievement_id"],view_cart:["currency","items","value"],view_item:["currency","items","value"],view_item_list:["items","item_list_name","item_list_id"],view_promotion:["items","location_id"],exception:["description","fatal"],screen_view:["screen_name"]};u.std_params={"transaction_id":function(){return u.data.order_id;},"affiliation":function(){return u.data.order_store;},"value":function(event){if(event.match(/timing_complete|virtual_currency/i)){return u.data.value;}
return u.data.order_total;},"currency":function(){return u.data.order_currency;},"tax":function(){return u.data.order_tax;},"shipping":function(){return u.data.order_shipping;},"coupon":function(){return u.data.order_coupon_code;},"fatal":function(){return toBoolean(u.data.fatal);},"items":function(event){if(event.match(/view_item$|select_content/)){return getItems(1);}
return getItems();},"item_id":function(){return u.data.product_id[0]?u.data.product_id[0]:"";}};utag.o[loader].loader.LOAD(id);}("220","lufthansa.lx-main"));}catch(error){utag.DB(error);}
